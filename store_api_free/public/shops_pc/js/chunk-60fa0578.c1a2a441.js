(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-60fa0578"],{"1a4b":function(t,e,a){"use strict";var i=a("a198"),o=a.n(i);o.a},"2a99":function(t,e,a){},"5afa":function(t,e,a){"use strict";var i=a("2a99"),o=a.n(i);o.a},"9f2c":function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"pro_category"},[a("el-container",{staticClass:"container"},[a("el-aside",{staticClass:"not-print bg-white erbian",attrs:{width:"160px"}},[a("Nav",{attrs:{ac:"2"}})],1),a("el-main",{staticClass:"main"},[[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("商家")]),a("el-breadcrumb-item",[t._v("商品分类")])],1),a("div",{staticClass:"H10"}),a("div",{staticClass:"zhang"},[a("div",{staticClass:"category"},[a("AddCategory",{attrs:{list:t.category_top},on:{up_parent:t.up_list}}),a("el-dialog",{attrs:{title:"",visible:t.editbox,width:"35%",center:""},on:{"update:visible":function(e){t.editbox=e}}},[a("el-form",{attrs:{model:t.editform}},[a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"商品分类名称","label-width":t.formLabelWidth}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editform.category_name,callback:function(e){t.$set(t.editform,"category_name",e)},expression:"editform.category_name"}})],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.editbox=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit(t.editindex)}}},[t._v("确 定")])],1)],1),[a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.category,border:"","default-sort":{prop:"sort",order:"descending"}}},[a("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),a("el-table-column",{attrs:{prop:"name",label:"分类名字"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t\t\t\t\t\t\t\t\t\t"+t._s(e.row.name)+"\n\t\t\t\t\t\t\t\t\t\t")]}}])}),a("el-table-column",{attrs:{prop:"level",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(a){return t.del(e.row.id,e.$index)}}},[t._v("删除")])]}}])})],1)]],2)])]],2)],1),a("Pic",{ref:"child",attrs:{drawer:t.drawer,father_fun:t.get_img,length:t.length,iscg:t.is_cg}})],1)},o=[],r=(a("6d57"),a("309f"),a("0b53"),a("06a2"),a("ec25"),a("cc57"),a("2b45"),a("c904"),a("c405"),a("b705"),function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"add-cate"},[a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addbox=!0}}},[t._v("添加商品分类")]),a("el-dialog",{attrs:{title:"",visible:t.addbox,width:"35%",center:""},on:{"update:visible":function(e){t.addbox=e}}},[a("el-form",{ref:"box-a",attrs:{model:t.addform,rules:t.rules}},[a("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"商品分类名称","label-width":t.formLabelWidth,prop:"category_name"}},[a("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addform.category_name,callback:function(e){t.$set(t.addform,"category_name",e)},expression:"addform.category_name"}})],1)],1),a("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:function(e){t.addbox=!1}}},[t._v("取 消")]),a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1),a("Pic",{attrs:{drawer:t.drawer,father_fun:t.get_img,length:t.length}})],1)}),n=[],s=a("a49b"),l=a("ab56"),c={name:"Category",props:["list"],data:function(){return{rules:{category_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}]},length:1,drawer:!1,getimg:this.$getimg,img_list:[],addbox:!1,addform:{category_name:""},formLabelWidth:"120px",upfile_url:s["a"]+"/admin/upload/img",upfile_data:{use:"category"},upfile_head:{token:localStorage.getItem("token")},upfile_list:[]}},components:{Pic:l["a"]},methods:{img_manage:function(){this.drawer=!this.drawer,this.length=50},onSubmit:function(){var t=this;this.http.post_show("cate/add_category",{name:this.addform.category_name}).then((function(e){t.$message({message:"操作成功",type:"success"}),t.addbox=!1,t.addform.category_name="",t.$emit("up_parent")}))},to_choose_img:function(){this.length=1,this.drawer=!this.drawer},is_show:function(){this.drawer=!this.drawer},get_img:function(t){for(var e in this.drawer=!1,t){var a=t[e];this.img_list.push(a),this.addform.category_pic=a.id}this.length=6-this.img_list.length,console.log("get_img_end:",t,this.img_list)},delimg:function(t){this.img_list.splice(t,1)},up_ok:function(t){201==t.code&&(this.addform.category_pic=t.id)}}},d=c,u=(a("5afa"),a("9ca4")),g=Object(u["a"])(d,r,n,!1,null,"634508f6",null),f=g.exports,m=a("2f21");function h(t,e){var a;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(a=p(t))||e&&t&&"number"===typeof t.length){a&&(t=a);var i=0,o=function(){};return{s:o,n:function(){return i>=t.length?{done:!0}:{done:!1,value:t[i++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,n=!0,s=!1;return{s:function(){a=t[Symbol.iterator]()},n:function(){var t=a.next();return n=t.done,t},e:function(t){s=!0,r=t},f:function(){try{n||null==a.return||a.return()}finally{if(s)throw r}}}}function p(t,e){if(t){if("string"===typeof t)return _(t,e);var a=Object.prototype.toString.call(t).slice(8,-1);return"Object"===a&&t.constructor&&(a=t.constructor.name),"Map"===a||"Set"===a?Array.from(t):"Arguments"===a||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(a)?_(t,e):void 0}}function _(t,e){(null==e||e>t.length)&&(e=t.length);for(var a=0,i=new Array(e);a<e;a++)i[a]=t[a];return i}var y={components:{Nav:m["a"],Pic:l["a"],AddCategory:f},data:function(){return{is_cg:0,length:1,drawer:!1,getimg:this.$getimg,img_list:[],input:"",category:[],category_top:[],dialogTableVisible:!1,editbox:!1,editform:{category_name:"",short_name:"",pid:"",category_pic:[],imgs:[]},formLabelWidth:"120px",editindex:0,upfile_url:s["a"]+"/admin/upload/img",upfile_data:{use:"category"},upfile_head:{token:localStorage.getItem("token")}}},mounted:function(){this.getCategory()},methods:{getCategory:function(){var t=this,e=[];this.http.get("/cate/get_category_all").then((function(a){for(var i=0;i<a.data.length;i++)1==a.data[i].level&&e.push(a.data[i]),2==a.data[i].level?a.data[i].line=!0:a.data[i].line=!1;t.category=a.data,console.log(a.data),t.category_top=e}))},to_choose_img:function(){this.drawer=!this.drawer},is_show:function(){this.drawer=!this.drawer},get_img:function(t){for(var e in this.drawer=!1,t){var a=t[e];this.img_list.push(a),this.editform.category_pic=a.id,this.editform.imgs=a.url}this.length=6-this.img_list.length,console.log("get_img_end:",t,this.img_list)},delimg:function(t){this.editform.imgs=""},del:function(t,e){var a=this,i=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){a.http.Del("cate/del_category",{id:t}).then((function(t){1==t.data?i.$message({showClose:!0,message:t.msg,type:"success"}):i.$message({showClose:!0,message:t.msg,type:"warning"}),a.getCategory()}))}))},onedit:function(t){console.log(t);var e=this;for(var a in e.category){var i=e.category[a];i.id==t&&(e.editform=i)}console.log(this.editform),this.editbox=!0},up_list:function(){this.getCategory()},sort_sub:function(){var t,e=this,a={},i=this,o=h(i.category);try{for(o.s();!(t=o.n()).done;){var r=t.value;a[r.category_id]=r.sort}}catch(n){o.e(n)}finally{o.f()}this.http.post_show("category/admin/set_sort",a).then((function(t){e.$message({message:"操作成功",type:"success"})}))},onSubmit:function(t){var e=this,a=this;this.http.post_show("category/admin/edit_category",{form:a.editform}).then((function(t){e.$message({message:"修改成功",type:"success"}),a.editbox=!1,e.getCategory()}))},onswitch:function(t){this.http.put_show("/cms/update",{id:t,db:"category",field:"is_visible"}).then((function(t){console.log(t)}))},up_ok:function(t){201==t.code&&(this.editform.category_pic=t.id)}}},b=y,v=(a("1a4b"),Object(u["a"])(b,i,o,!1,null,null,null));e["default"]=v.exports},a198:function(t,e,a){},c405:function(t,e,a){"use strict";var i=a("981f");a("a49b"),a("b705"),i["a"].service}}]);