(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-55478a08"],{"1a4b":function(t,e,i){"use strict";i("c27c")},"2f21":function(t,e,i){"use strict";var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"shop_nav"},[i("div",{staticClass:"top-title"},[t._v("商家管理")]),i("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.act},on:{open:t.handleOpen,close:t.handleClose}},[i("el-submenu",{attrs:{index:"1"}},[i("template",{slot:"title"},[i("span",[t._v("商家")])]),i("el-menu-item",{attrs:{index:"1-1"},on:{click:t.jump_to_a}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v("商家列表")])]),i("el-menu-item",{attrs:{index:"1-2"},on:{click:t.jump_to_assistant}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v(" 店员管理")])])],2),i("el-submenu",{attrs:{index:"2"}},[i("template",{slot:"title"},[i("span",[t._v("商品")])]),i("el-menu-item",{attrs:{index:"2-1"},on:{click:t.jump_pro_list}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v("商品列表")])]),i("el-menu-item",{attrs:{index:"2-2"},on:{click:t.jump_pro_category}},[i("span",{attrs:{slot:"title"},slot:"title"},[t._v("商品分类")])])],2)],1)],1)},o=[],r={data:function(){return{act:""}},props:{ac:String},mounted:function(){this.act=this.ac},methods:{jump_to_a:function(){this.$router.push({path:"/shops/shop_list"})},jump_to_b:function(){this.$router.push({path:"/shops/shop_approve"})},jump_to_assistant:function(){this.$router.push({path:"/shops/assistant_list"})},jump_pro_list:function(){this.$router.push({path:"/shops/pro_list"})},jump_pro_category:function(){this.$router.push({path:"/shops/pro_category"})},handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)},handleselect:function(t,e){this.act=t,localStorage.setItem("act",t)}}},s=r,l=i("c701"),n=Object(l["a"])(s,a,o,!1,null,null,null);e["a"]=n.exports},"9f2c":function(t,e,i){"use strict";i.r(e);var a=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"pro_category"},[i("el-container",{staticClass:"container"},[i("el-aside",{staticClass:"not-print bg-white erbian",attrs:{width:"160px"}},[i("Nav",{attrs:{ac:"2-2"}})],1),i("el-main",{staticClass:"main"},[[i("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[i("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),i("el-breadcrumb-item",[t._v("商家")]),i("el-breadcrumb-item",[t._v("商品分类")])],1),i("div",{staticClass:"H10"}),i("div",{staticClass:"zhang"},[i("div",{staticClass:"category"},[i("AddCategory",{attrs:{list:t.category_top},on:{up_parent:t.up_list}}),i("el-dialog",{attrs:{title:"",visible:t.editbox,width:"35%",center:""},on:{"update:visible":function(e){t.editbox=e}}},[i("el-form",{attrs:{model:t.editform}},[i("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"商品分类名称","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editform.category_name,callback:function(e){t.$set(t.editform,"category_name",e)},expression:"editform.category_name"}})],1),i("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"商品分类简称","label-width":t.formLabelWidth}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.editform.short_name,callback:function(e){t.$set(t.editform,"short_name",e)},expression:"editform.short_name"}})],1),i("el-form-item",{attrs:{label:"上级分类","label-width":t.formLabelWidth}},[i("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.editform.pid,callback:function(e){t.$set(t.editform,"pid",e)},expression:"editform.pid"}},[i("el-option",{attrs:{label:"顶级分类",value:"0"}}),t._l(t.category_top,(function(t){return i("el-option",{attrs:{value:t.category_id,label:t.category_name}})}))],2)],1),i("el-form-item",{attrs:{label:"选择图片","label-width":t.formLabelWidth}},[t.editform.imgs?i("div",{staticStyle:{display:"flex",width:"530px","flex-wrap":"wrap"}},[i("i",{staticClass:"el-icon-circle-close",on:{click:t.delimg}}),i("div",{staticClass:"picA",on:{click:t.to_choose_img}},[i("img",{staticClass:"img",attrs:{src:t.getimg+t.editform.imgs}})])]):i("div",{staticClass:"picA",staticStyle:{"margin-left":"19px"},on:{click:t.to_choose_img}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"margin-top":"45%",height:"28px",width:"28px"}})])])],1),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.editbox=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:function(e){return t.onSubmit(t.editindex)}}},[t._v("确 定")])],1)],1),[i("el-table",{staticStyle:{width:"100%"},attrs:{data:t.category,border:"","default-sort":{prop:"sort",order:"descending"}}},[i("el-table-column",{attrs:{type:"index",label:"序号",width:"80"}}),i("el-table-column",{attrs:{prop:"category_name",label:"分类名字"},scopedSlots:t._u([{key:"default",fn:function(e){return[e.row.line?i("span",[t._v("  |——")]):t._e(),t._v(t._s(e.row.category_name)+"\n\t\t\t\t\t\t\t\t\t")]}}])}),i("el-table-column",{attrs:{prop:"short_name",label:"商品分类简称"}}),i("el-table-column",{attrs:{prop:"imgs",label:"缩略图"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("img",{attrs:{src:t.$getimg+e.row.imgs,width:"40",height:"40"}})]}}])}),i("el-table-column",{attrs:{prop:"pid",label:"Pid"}}),i("el-table-column",{attrs:{prop:"category_id",label:"分类id"}}),i("el-table-column",{attrs:{prop:"is_visible",label:"是否显示"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-switch",{attrs:{"active-color":"#409EFF","inactive-color":"#DCDFE6"},on:{change:function(i){return t.onswitch(e.row.category_id)}},model:{value:e.row.is_visible,callback:function(i){t.$set(e.row,"is_visible",i)},expression:"scope.row.is_visible"}})]}}])}),i("el-table-column",{attrs:{prop:"level",label:"操作"},scopedSlots:t._u([{key:"default",fn:function(e){return[i("el-button",{attrs:{type:"success",size:"small"},on:{click:function(i){return t.onedit(e.row.category_id)}}},[t._v("修改")]),i("el-button",{attrs:{type:"danger",size:"small"},on:{click:function(i){return t.del(e.row.category_id,e.$index)}}},[t._v("删除")])]}}])})],1)]],2)])]],2)],1),i("Pic",{ref:"child",attrs:{drawer:t.drawer,father_fun:t.get_img,length:t.length,iscg:t.is_cg}})],1)},o=[],r=(i("6d57"),i("309f"),i("0b53"),i("06a2"),i("ec25"),i("cc57"),i("2b45"),i("c904"),i("c405")),s=(i("e1fd"),function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"add-cate"},[i("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){t.addbox=!0}}},[t._v("添加商品分类")]),i("el-button",{attrs:{type:"primary",size:"small"},on:{click:t.img_manage}},[t._v("图库管理")]),i("el-dialog",{attrs:{title:"",visible:t.addbox,width:"35%",center:""},on:{"update:visible":function(e){t.addbox=e}}},[i("el-form",{ref:"box-a",attrs:{model:t.addform,rules:t.rules}},[i("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"商品分类名称","label-width":t.formLabelWidth,prop:"category_name"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addform.category_name,callback:function(e){t.$set(t.addform,"category_name",e)},expression:"addform.category_name"}})],1),i("el-form-item",{staticStyle:{width:"80%"},attrs:{label:"商品分类简称","label-width":t.formLabelWidth,prop:"short_name"}},[i("el-input",{attrs:{"auto-complete":"off"},model:{value:t.addform.short_name,callback:function(e){t.$set(t.addform,"short_name",e)},expression:"addform.short_name"}})],1),i("el-form-item",{attrs:{label:"上级分类","label-width":t.formLabelWidth,prop:"pid"}},[i("el-select",{attrs:{placeholder:"请选择分类"},model:{value:t.addform.pid,callback:function(e){t.$set(t.addform,"pid",e)},expression:"addform.pid"}},[i("el-option",{attrs:{label:"顶级分类",value:"0"}}),t._l(t.list,(function(t){return i("el-option",{attrs:{value:t.category_id,label:t.category_name}})}))],2)],1),i("el-form-item",{attrs:{label:"分类图片","label-width":t.formLabelWidth}},[t.img_list.length>0?[i("div",{staticStyle:{display:"flex",width:"530px","flex-wrap":"wrap"}},[t._l(t.img_list,(function(e,a){return[i("i",{staticClass:"el-icon-circle-close",on:{click:function(e){return t.delimg(a)}}}),t.img_list.length>0?i("div",{staticClass:"picA"},[i("img",{staticClass:"img",attrs:{src:t.getimg+e.url}})]):t._e()]}))],2)]:t._e(),t.img_list.length<1?i("div",{staticClass:"picA",staticStyle:{"margin-left":"19px"},on:{click:t.to_choose_img}},[i("i",{staticClass:"el-icon-plus",staticStyle:{"margin-top":"45%",height:"28px",width:"28px"}})]):t._e()],2)],1),i("div",{staticClass:"dialog-footer",staticStyle:{"text-align":"center"},attrs:{slot:"footer"},slot:"footer"},[i("el-button",{on:{click:function(e){t.addbox=!1}}},[t._v("取 消")]),i("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("确 定")])],1)],1),i("Pic",{attrs:{drawer:t.drawer,father_fun:t.get_img,length:t.length}})],1)}),l=[],n=i("a49b"),c=i("ab56"),d={name:"Category",props:["list"],data:function(){return{rules:{category_name:[{required:!0,message:"请输入分类名称",trigger:"blur"}],short_name:[{required:!0,message:"请输入分类简称",trigger:"blur"}],pid:[{required:!0,message:"请选择分类等级",trigger:"change"}]},length:1,drawer:!1,getimg:this.$getimg,img_list:[],addbox:!1,addform:{category_name:"",short_name:"",pid:"",category_pic:""},formLabelWidth:"120px",upfile_url:n["a"]+"/admin/upload/img",upfile_data:{use:"category"},upfile_head:{token:localStorage.getItem("token")},upfile_list:[]}},components:{Pic:c["a"]},methods:{img_manage:function(){this.drawer=!this.drawer,this.length=50},onSubmit:function(){var t=this;this.$refs["box-a"].validate((function(e){if(!e)return!1;r["a"].add({form:t.addform}).then((function(e){for(var i in t.$message({showClose:!0,message:"新增成功",type:"success"}),t.addbox=!1,t.addform)t.addform[i]="";t.upfile_list=[],t.$emit("up_parent"),t.img_list=[]}))}))},to_choose_img:function(){this.length=1,this.drawer=!this.drawer},is_show:function(){this.drawer=!this.drawer},get_img:function(t){for(var e in this.drawer=!1,t){var i=t[e];this.img_list.push(i),this.addform.category_pic=i.id}this.length=6-this.img_list.length,console.log("get_img_end:",t,this.img_list)},delimg:function(t){this.img_list.splice(t,1)},up_ok:function(t){201==t.code&&(this.addform.category_pic=t.id)}}},u=d,m=(i("fded"),i("c701")),f=Object(m["a"])(u,s,l,!1,null,"82b89744",null),g=f.exports,p=i("2f21");function h(t,e){var i;if("undefined"===typeof Symbol||null==t[Symbol.iterator]){if(Array.isArray(t)||(i=_(t))||e&&t&&"number"===typeof t.length){i&&(t=i);var a=0,o=function(){};return{s:o,n:function(){return a>=t.length?{done:!0}:{done:!1,value:t[a++]}},e:function(t){throw t},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var r,s=!0,l=!1;return{s:function(){i=t[Symbol.iterator]()},n:function(){var t=i.next();return s=t.done,t},e:function(t){l=!0,r=t},f:function(){try{s||null==i.return||i.return()}finally{if(l)throw r}}}}function _(t,e){if(t){if("string"===typeof t)return b(t,e);var i=Object.prototype.toString.call(t).slice(8,-1);return"Object"===i&&t.constructor&&(i=t.constructor.name),"Map"===i||"Set"===i?Array.from(t):"Arguments"===i||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(i)?b(t,e):void 0}}function b(t,e){(null==e||e>t.length)&&(e=t.length);for(var i=0,a=new Array(e);i<e;i++)a[i]=t[i];return a}var y={components:{Nav:p["a"],Pic:c["a"],AddCategory:g},data:function(){return{is_cg:0,length:1,drawer:!1,getimg:this.$getimg,img_list:[],input:"",category:[],category_top:[],dialogTableVisible:!1,editbox:!1,editform:{category_name:"",short_name:"",pid:"",category_pic:[],imgs:[]},formLabelWidth:"120px",editindex:0,upfile_url:n["a"]+"/admin/upload/img",upfile_data:{use:"category"},upfile_head:{token:localStorage.getItem("token")}}},mounted:function(){this.getCategory()},methods:{getCategory:function(){var t=this,e=[];r["a"].getAll().then((function(i){console.log(t.category);for(var a=0;a<i.data.length;a++)1==i.data[a].level&&e.push(i.data[a]),2==i.data[a].level?i.data[a].line=!0:i.data[a].line=!1;t.category=i.data,t.category_top=e}))},to_choose_img:function(){this.drawer=!this.drawer},is_show:function(){this.drawer=!this.drawer},get_img:function(t){for(var e in this.drawer=!1,t){var i=t[e];this.img_list.push(i),this.editform.category_pic=i.id,this.editform.imgs=i.url}this.length=6-this.img_list.length,console.log("get_img_end:",t,this.img_list)},delimg:function(t){this.editform.imgs=""},del:function(t,e){var i=this,a=this;this.$confirm("是否删除?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then((function(){i.http.put_show("category/admin/del_category",{id:t}).then((function(t){1==t.data?a.$message({showClose:!0,message:t.msg,type:"success"}):a.$message({showClose:!0,message:t.msg,type:"warning"}),i.getCategory()}))}))},onedit:function(t){console.log(t);var e=this;for(var i in e.category){var a=e.category[i];a.category_id==t&&(e.editform=a)}console.log(this.editform),this.editbox=!0},up_list:function(){this.getCategory()},sort_sub:function(){var t,e=this,i={},a=this,o=h(a.category);try{for(o.s();!(t=o.n()).done;){var r=t.value;i[r.category_id]=r.sort}}catch(s){o.e(s)}finally{o.f()}this.http.post_show("category/admin/set_sort",i).then((function(t){e.$message({message:"操作成功",type:"success"})}))},onSubmit:function(t){var e=this,i=this;this.http.post_show("category/admin/edit_category",{form:i.editform}).then((function(t){e.$message({message:"修改成功",type:"success"}),i.editbox=!1,e.getCategory()}))},onswitch:function(t){this.http.put_show("/cms/update",{id:t,db:"category",field:"is_visible"}).then((function(t){console.log(t)}))},up_ok:function(t){201==t.code&&(this.editform.category_pic=t.id)}}},v=y,w=(i("1a4b"),Object(m["a"])(v,a,o,!1,null,null,null));e["default"]=w.exports},a2cd:function(t,e,i){"use strict";var a=i("238a");t.exports=function(t,e){return!!t&&a((function(){e?t.call(null,(function(){}),1):t.call(null)}))}},c27c:function(t,e,i){},c405:function(t,e,i){"use strict";var a=i("981f"),o=i("a49b"),r=i("e1fd"),s=a["a"].service,l=function(){Object(r["Message"])({message:"演示版",type:"error",duration:5e3})};e["a"]={getAll:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return s({url:"/category/admin/all_category",method:"get",data:t})},add:function(t){if(!o["b"])return s({url:"category/admin/add_category",method:"post",data:t});l()}}},c904:function(t,e,i){"use strict";var a=i("e46b"),o=i("5daa"),r=i("008a"),s=i("238a"),l=[].sort,n=[1,2,3];a(a.P+a.F*(s((function(){n.sort(void 0)}))||!s((function(){n.sort(null)}))||!i("a2cd")(l)),"Array",{sort:function(t){return void 0===t?l.call(r(this)):l.call(r(this),o(t))}})},de99:function(t,e,i){},fded:function(t,e,i){"use strict";i("de99")}}]);