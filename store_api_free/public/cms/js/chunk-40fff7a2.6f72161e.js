(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-40fff7a2"],{"1f4b":function(t,e,a){"use strict";a.r(e);var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"estimate"},[a("el-container",[a("el-aside",{staticClass:"not-print bg-white erbian",attrs:{width:"160px"}},[a("Nav",{attrs:{ac:"2"}})],1),a("el-main",[a("el-breadcrumb",{attrs:{"separator-class":"el-icon-arrow-right"}},[a("el-breadcrumb-item",{attrs:{to:{path:"/"}}},[t._v("首页")]),a("el-breadcrumb-item",[t._v("应用")]),a("el-breadcrumb-item",[t._v("营销应用")])],1),a("div",{staticClass:"H10"}),a("div",{staticClass:"zhang"},[a("el-button",{on:{click:t.jumpback}},[t._v("返回")]),a("div",{staticStyle:{height:"20px"}},[t._v(" ")]),a("div",{staticClass:"xiao"},[t._v("选择商品")]),a("div",{staticClass:"add"},[a("el-tabs",{staticStyle:{"margin-bottom":"20px"},attrs:{type:"border-card"},model:{value:t.active_name,callback:function(e){t.active_name=e},expression:"active_name"}},[a("el-tab-pane",{attrs:{label:"第一步：选择商品",name:"one"}},[a("div",{staticClass:"choose"},[a("div",{staticClass:"search"},[a("el-input",{staticStyle:{width:"15%","margin-right":"10px"},attrs:{size:"small",placeholder:"请输入商品名称"},nativeOn:{keyup:function(e){return!e.type.indexOf("key")&&t._k(e.keyCode,"enter",13,e.key,"Enter")?null:t.search_fx(t.fx_search_key)}},model:{value:t.fx_search_key,callback:function(e){t.fx_search_key=e},expression:"fx_search_key"}}),a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(e){return t.search_fx(t.fx_search_key)}}},[t._v("搜索")]),a("el-button",{attrs:{type:"success",size:"small"},on:{click:t.reset}},[t._v("重置")])],1),a("el-table",{staticStyle:{width:"100%"},attrs:{data:t.tableDataA}},[a("el-table-column",{attrs:{prop:"",label:"商品信息"},scopedSlots:t._u([{key:"default",fn:function(e){return[a("div",{staticClass:"pro"},[a("div",{staticClass:"pro_02"},[a("img",{attrs:{src:t.$getimg+e.row.imgs}})]),a("div",{staticClass:"pro_03"},[a("div",{staticClass:"pro_03_1"},[t._v(t._s(e.row.goods_name))]),a("div",{staticClass:"pro_03_2"},[t._v("¥"+t._s(e.row.price))])])])]}}])}),a("el-table-column",{attrs:{prop:"operation",label:"操作",width:"300px"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.is_reseller?a("el-button",{attrs:{type:"primary",size:"small"},on:{click:function(a){return t.join(e.row,e.$index)}}},[t._v("添加评价")]):t._e(),1==e.row.is_reseller?a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{slot:"reference",type:"danger",size:"small"},on:{click:function(a){return t.cancel(e.$index,e.row.goods_id)}},slot:"reference"},[t._v("取消")]):t._e()]}}])})],1)],1),a("div",{staticClass:"quan"},[a("div",{staticClass:"quan_l"},[a("el-button",{staticStyle:{"margin-left":"10px"},attrs:{type:"danger",size:"small"},on:{click:t.quanxuan}},[t._v("全选")])],1)])]),1==t.is_two?a("el-tab-pane",{attrs:{label:"第二步：设置评价",name:"two"}},[a("div",{staticClass:"choose"},[a("div",{staticClass:"xiao",staticStyle:{display:"flex"}},[a("div",{staticStyle:{"line-height":"40px"}},[t._v("每个商品评价的范围数量：")]),a("el-input",{staticStyle:{width:"20%","margin-left":"15px"},attrs:{placeholder:"如3或3,5",clearable:""},model:{value:t.esmInput,callback:function(e){t.esmInput=e},expression:"esmInput"}})],1)]),a("div",{staticClass:"quan"})]):t._e(),t.is_next?[a("el-pagination",{attrs:{background:"",layout:"prev, pager, next",total:t.total,"page-size":t.size},on:{"current-change":t.jump_page}})]:t._e()],2),a("span",{staticClass:"dialog-footer ",attrs:{slot:"footer"},slot:"footer"},[t.is_next?a("el-button",{on:{click:t.jumpback}},[t._v("取 消")]):t._e(),t.is_next?a("el-button",{attrs:{type:"primary"},on:{click:t.next}},[t._v("下一步")]):t._e(),t.is_next?t._e():a("el-button",{on:{click:t.back}},[t._v("上一步")]),t.is_next?t._e():a("el-button",{attrs:{type:"primary"},on:{click:t.onSubmit}},[t._v("提 交")])],1)],1)],1)],1)],1)],1)},i=[],n=(a("e1fd"),a("a49b"),a("9f54")),l={data:function(){return{fx_search_key:"",is_reseller:1,is_two:0,active_name:"one",is_next:!0,choose:!0,price:"",obj:{id:[],num:""},checked:"",tableDataA:[],tableDataB:{ids:[],num:""},oid:0,size:8,total:0,value:"",esmInput:""}},watch:{active_name:function(){"one"==this.active_name&&(this.is_two=0,this.is_next=!0),"two"==this.active_name&&(this.is_two=1,this.is_next=!1)}},components:{Nav:n["a"]},mounted:function(){},methods:{_load:function(){var t=this;this.http.post("product/admin/all_goods_info").then((function(e){for(var a in e.data){var s=e.data[a];s.is_reseller=0}t.all=e.data,t.total=e.data.length,t.tableDataA=e.data.slice(0,t.size)}))},search_fx:function(t){var e=[];for(var a in this.all){var s=this.all[a];s.goods_name.indexOf(t)>-1&&e.push(s)}this.tableDataA=e},reset:function(){this._load(),this.fx_search_key=""},jump_page:function(t){console.log(t);var e=this,a=(t-1)*e.size,s=t*e.size;console.log(a,s),this.tableDataA=this.all.slice(a,s)},quanxuan:function(){if(""!=this.tableDataA){console.log("a",this.tableDataA);for(var t=this.tableDataA.length,e=[],a=0;a<t;a++)e.push(this.tableDataA[a].goods_id),this.tableDataA[a].is_reseller=1;console.log(e),this.tableDataB["ids"]=e,this.$message({message:"已全部添加",type:"success"}),console.log("b",this.tableDataB)}else this.$message({message:"请确认商品",type:"warning"})},next:function(){this.is_two=1,this.active_name="two",this.is_next=!1},back:function(){this.is_two=0,this.active_name="one",this.is_next=!0},join:function(t,e){this.tableDataA[e].is_reseller=1;var a=t;""==this.tableDataB.ids||-1==this.tableDataB.ids.indexOf(a.goods_id)?(this.tableDataB.ids.push(a.goods_id),this.$message({message:"添加成功",type:"success"})):this.$message({message:"请勿重复添加",type:"warning"})},cancel:function(t,e){var a=e;if(""!=this.tableDataB.ids){for(var s=this.tableDataB.ids.length,i=this.tableDataB.ids,n=0;n<s;n++)if(-1!=i.indexOf(a)){var l=i.indexOf(a);i.splice(l,1),console.log(i);break}this.tableDataA[t].is_reseller=0}},onSubmit:function(){var t=this,e=this.esmInput;if(""==e&&e<0)return this.$message({message:"范围数值要大于0",type:"warning"}),!1;if(""==this.tableDataB.ids)return this.$message({message:"请添加商品",type:"warning"}),!1;this.tableDataB["num"]=e;var a=this.tableDataB,s="/rate/admin/key_rate";this.http.post_show(s,a).then((function(e){200==e.status&&(t.$message({message:"提交成功",type:"success"}),t.$router.push({path:"/application"}))})).catch((function(t){return t}))},jumpback:function(){this.$router.push({path:"/application"})}}},o=l,c=(a("d991"),a("c701")),r=Object(c["a"])(o,s,i,!1,null,null,null);e["default"]=r.exports},"9f54":function(t,e,a){"use strict";var s=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"shop_nav"},[a("div",{staticClass:"top-title"},[t._v("设置管理")]),a("el-menu",{staticClass:"el-menu-vertical-demo",attrs:{"default-active":t.act},on:{open:t.handleOpen,close:t.handleClose}},[a("el-submenu",{attrs:{index:"1"}},[a("template",{slot:"title"},[a("span",[t._v("基础应用")])]),a("el-menu-item",{attrs:{index:"1-1"},on:{click:t.jump_to_a}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("导航设置")])]),a("el-menu-item",{attrs:{index:"1-2"},on:{click:t.jump_to_b}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v("文章管理")])]),a("el-menu-item",{attrs:{index:"1-3"},on:{click:t.jump_to_c}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(" 广告管理")])]),a("el-menu-item",{attrs:{index:"1-4"},on:{click:t.jump_to_d}},[a("span",{attrs:{slot:"title"},slot:"title"},[t._v(" 搜索管理")])])],2)],1)],1)},i=[],n={data:function(){return{act:""}},props:{ac:String},mounted:function(){this.act=this.ac},methods:{jump_to_a:function(){this.$router.push({path:"/app_nav"})},jump_to_b:function(){this.$router.push({path:"/app_article"})},jump_to_c:function(){this.$router.push({path:"/app_ad"})},jump_to_d:function(){this.$router.push({path:"/app_search"})},handleOpen:function(t,e){console.log(t,e)},handleClose:function(t,e){console.log(t,e)},handleselect:function(t,e){this.act=t,localStorage.setItem("act",t)}}},l=n,o=a("c701"),c=Object(o["a"])(l,s,i,!1,null,null,null);e["a"]=c.exports},d991:function(t,e,a){"use strict";a("e23c")},e23c:function(t,e,a){}}]);